{"ast":null,"code":"var _jsxFileName = \"/Users/kathryncrisafulli/Desktop/clueless_git/UnitedCoders/clueless_react/src/MapExample.js\";\n// import React from \"react\";\n// import \"./styles.css\";\n// import { ImageMap } from \"@qiuz/react-image-map\";\n// import { AreaType } from \"./AreaType\";\n// const onMapClick = (area: AreaType, index: number) => {\n//   const tip = `click map${area.href || index + 1}`;\n//   console.log(tip);\n//   alert(tip);\n// };\n// // in hooks\n// export default function Example() {\n//   const img =\n//     \"https://qiuziz.github.io/react-image-map/static/media/example.3373acbe.png\";\n//   const mapArea = [\n//     { left: \"0%\", top: \"6%\", height: \"12%\", width: \"33%\" },\n//     { left: \"10%\", top: \"6%\", height: \"12%\", width: \"33%\" }\n//   ];\n//   const ImageMapComponent = React.useMemo(\n//     () => (s\n//       <ImageMap\n//         className=\"usage-map\"\n//         src={img}\n//         map={mapArea}\n//         onMapClick={onMapClick}\n//       />\n//     ),\n//     [mapArea, img]\n//   );\n//   return <div>{ImageMapComponent}</div>;\n//   }\nimport React from \"react\";\nimport ImageMapper from 'react-image-mapper';\nimport { positional } from \"yargs\";\nimport { makeMovement, makeSuggestion, makeAccusation, makeDisprove } from './ClientManager'; //All rooms and Hallways codes. Sequence is important - Please don't change them.\n\nvar roomCode = ['11', '12', '13', '21', '22', '23', '31', '32', '33', '1112', '1213', '1121', '1222', '1323', '2122', '2223', '2131', '2232', '2333', '3132', '3233']; //All rooms and Hallways locations to put objects. Sequence is important - Please don't change them.\n\nvar roomArra = [[103, 241, 273, 426], [379, 300, 585, 455], [691, 235, 853, 394], [103, 541, 337, 716], [423, 544, 561, 715], [674, 510, 828, 660], [103, 835, 305, 1011], [385, 796, 569, 995], [640, 892, 861, 1017], [304, 374, 304, 374], [625, 374, 625, 374], [219, 460, 219, 460], [543, 479, 543, 479], [735, 440, 735, 440], [365, 599, 365, 599], [591, 567, 591, 567], [284, 753, 284, 753], [444, 741, 444, 741], [680, 725, 680, 725], [335, 924, 335, 924], [590, 923, 590, 923]]; //All valid rooms and hallways to move in (based on player's current location). Sequence is important - Please don't change them.\n\nvar roomAccess = [['1112', '1121', '33'], ['1112', '1222', '1213'], ['1213', '1323', '31'], ['1121', '2122', '2131'], ['2122', '1222', '2223', '2232'], ['2223', '1323', '2333'], ['2131', '3132', '13'], ['3132', '2232', '3233'], ['3233', '2333', '11'], ['11', '12'], ['12', '13'], ['11', '21'], ['12', '22'], ['13', '23'], ['21', '22'], ['22', '23'], ['21', '31'], ['22', '32'], ['23', '33'], ['31', '32'], ['32', '33']];\n\nclass MapExample extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      actions: []\n    };\n    this.state = {\n      actions: this.props.actions,\n      hoveredArea: null,\n      msg: null,\n      moveMsg: null,\n      myid: 'P1',\n      started: true\n    };\n  }\n\n  //Process the Move for Person or Weapon to new location\n  MoveObject(PID, TO) {\n    var currentLoc = document.getElementById(PID).getAttribute('data-locId');\n    document.getElementById(PID).setAttribute('data-locId', TO);\n    this.RenderRoom(currentLoc);\n    this.RenderRoom(TO);\n  } //Sets current user Character\n\n\n  SetUser(NUSR) {\n    this.state.myid = NUSR;\n  } //Organizes Objects in a room/hallway  (Updates Room on Gui)\n\n\n  RenderRoom(RID) {\n    var roomidx = -1;\n\n    for (roomidx = 0; roomidx < 21; roomidx++) {\n      if (RID == roomCode[roomidx]) break;\n    } //alert(roomidx+','+roomCode[roomidx]);\n\n\n    var fromx = roomArra[roomidx][0];\n    var fromy = roomArra[roomidx][1];\n    var tox = roomArra[roomidx][2];\n    var toy = roomArra[roomidx][3];\n    var i = 0;\n    var cx = fromx;\n    var cy = fromy;\n\n    for (i = 1; i < 7; i++) {\n      if (roomCode[roomidx] == document.getElementById('P' + i).getAttribute('data-locId')) {\n        $('#P' + i).css({\n          left: cx + 'px'\n        });\n        $('#P' + i).css({\n          top: cy + 'px'\n        });\n        cy += 45;\n\n        if (cy + 40 > toy) {\n          cx += 45;\n          cy = fromy;\n        }\n      }\n    }\n\n    for (i = 1; i < 7; i++) {\n      if (roomCode[roomidx] == document.getElementById('W' + i).getAttribute('data-locId')) {\n        $('#W' + i).css({\n          left: cx + 'px'\n        });\n        $('#W' + i).css({\n          top: cy + 'px'\n        });\n        cy += 45;\n\n        if (cy + 40 > toy) {\n          cx += 45;\n          cy = fromy;\n        }\n      }\n    } //var rcode=roomCode;\n\n  } //Checks if Hallway is free to move in ?\n\n\n  ISFree(HWID) {\n    for (var i = 1; i < 7; i++) {\n      if (HWID == document.getElementById('P' + i).getAttribute('data-locId')) {\n        return false;\n      }\n    }\n\n    return true;\n  } //Validates the requested move.\n  // We can not move to a Hallway if already someone is there\n  // We only can move to neighbor areas and cross connected rooms\n\n\n  ValidateMove(dataId) {\n    var roomidx = -1;\n    var locid = document.getElementById(this.state.myid).getAttribute('data-locId');\n\n    for (roomidx = 0; roomidx < 21; roomidx++) {\n      if (locid == roomCode[roomidx]) break;\n    }\n\n    for (var i = 0; i < roomAccess[roomidx].length; i++) {\n      if (roomAccess[roomidx][i] == dataId) {\n        if (roomAccess[roomidx][i].length == 2) return true;\n        return this.ISFree(roomAccess[roomidx][i]);\n      }\n    }\n\n    return false;\n  } //Manages Click event on area (Room or Hallway) . Validate the Move and Move the player to new location.\n\n\n  AreaClicked(area) {\n    if (!this.state.started) return;\n    var dataId = area.getAttribute('data-Id');\n\n    if (!this.ValidateMove(dataId)) {\n      alert('Your requested move is not valid!');\n      return;\n    }\n\n    this.MoveObject(this.state.myid, area.getAttribute('data-Id'));\n  } // Provided by example\n\n\n  load() {\n    this.setState({\n      msg: \"Interact with image !\"\n    });\n  }\n\n  clicked(area) {\n    this.setState({\n      msg: `You clicked on ${area.shape} at coords ${JSON.stringify(area.coords)} !`\n    });\n    console.log(this.state.msg);\n    makeMovement(\"true\", \"hallway\");\n  }\n\n  clickedOutside(evt) {\n    const coords = {\n      x: evt.nativeEvent.layerX,\n      y: evt.nativeEvent.layerY\n    };\n    this.setState({\n      msg: `You clicked on the image at coords ${JSON.stringify(coords)} !`\n    });\n  }\n\n  moveOnImage(evt) {\n    const coords = {\n      x: evt.nativeEvent.layerX,\n      y: evt.nativeEvent.layerY\n    };\n    this.setState({\n      moveMsg: `You moved on the image at coords ${JSON.stringify(coords)} !`\n    });\n  }\n\n  enterArea(area) {\n    this.setState({\n      hoveredArea: area,\n      msg: `You entered ${area.shape} ${area.name} at coords ${JSON.stringify(area.coords)} !`\n    });\n  }\n\n  leaveArea(area) {\n    this.setState({\n      hoveredArea: null,\n      msg: `You leaved ${area.shape} ${area.name} at coords ${JSON.stringify(area.coords)} !`\n    });\n  }\n\n  moveOnArea(area, evt) {\n    const coords = {\n      x: evt.nativeEvent.layerX,\n      y: evt.nativeEvent.layerY\n    };\n    this.setState({\n      moveMsg: `You moved on ${area.shape} ${area.name} at coords ${JSON.stringify(coords)} !`\n    });\n  }\n\n  getTipPosition(area) {\n    return {\n      top: `${area.center[1]}px`,\n      left: `${area.center[0]}px`\n    };\n  }\n\n  render() {\n    //console.log('MessageState:' + this.state.actions)\n    //console.log('MessageProps:' + this.props.actions)\n    const URL = \"/gameboard/GBG.png\";\n    const MAP = {\n      name: \"my-map\",\n      areas: [{\n        name: \"11\",\n        shape: \"rect\",\n        coords: [93, 213, 286, 439],\n        preFillColor: \"green\"\n      }, {\n        name: \"12\",\n        shape: \"poly\",\n        coords: [350, 278, 416, 277, 416, 243, 542, 245, 543, 279, 607, 279, 606, 468, 349, 468],\n        preFillColor: \"green\"\n      }, {\n        name: \"13\",\n        shape: 'rect',\n        coords: [673, 216, 863, 407],\n        preFillColor: \"green\"\n      }, {\n        name: \"21\",\n        shape: 'poly',\n        coords: [92, 503, 253, 505, 254, 534, 349, 537, 348, 727, 93, 727],\n        preFillColor: \"green\"\n      }, {\n        name: \"22\",\n        shape: 'rect',\n        coords: [418, 537, 575, 724],\n        preFillColor: \"green\"\n      }, {\n        name: \"23\",\n        shape: 'poly',\n        coords: [642, 538, 670, 538, 671, 506, 831, 506, 832, 538, 862, 539, 864, 632, 831, 636, 833, 664, 670, 666, 669, 633, 639, 632],\n        preFillColor: \"green\"\n      }, {\n        name: \"31\",\n        shape: 'rect',\n        coords: [91, 822, 316, 1020],\n        preFillColor: \"green\"\n      }, {\n        name: \"32\",\n        shape: 'rect',\n        coords: [382, 792, 571, 1001],\n        preFillColor: \"green\"\n      }, {\n        name: \"33\",\n        shape: 'rect',\n        coords: [639, 892, 862, 1017],\n        preFillColor: \"green\"\n      }, {\n        name: \"1112\",\n        shape: 'rect',\n        coords: [288, 373, 348, 403],\n        preFillColor: \"green\"\n      }, {\n        name: \"1213\",\n        shape: 'rect',\n        coords: [610, 371, 671, 404],\n        preFillColor: \"green\"\n      }, {\n        name: \"2122\",\n        shape: 'rect',\n        coords: [352, 597, 416, 629],\n        preFillColor: \"green\"\n      }, {\n        name: \"2223\",\n        shape: 'rect',\n        coords: [578, 563, 639, 598],\n        preFillColor: \"green\"\n      }, {\n        name: \"3132\",\n        shape: 'rect',\n        coords: [318, 921, 381, 953],\n        preFillColor: \"green\"\n      }, {\n        name: \"3233\",\n        shape: 'rect',\n        coords: [576, 920, 637, 953],\n        preFillColor: \"green\"\n      }, {\n        name: \"1121\",\n        shape: 'rect',\n        coords: [218, 440, 252, 501],\n        preFillColor: \"green\"\n      }, {\n        name: \"1222\",\n        shape: 'rect',\n        coords: [542, 471, 576, 531],\n        preFillColor: \"green\"\n      }, {\n        name: \"1323\",\n        shape: 'rect',\n        coords: [734, 409, 771, 503],\n        preFillColor: \"green\"\n      }, {\n        name: \"2131\",\n        shape: 'rect',\n        coords: [282, 730, 318, 819],\n        preFillColor: \"green\"\n      }, {\n        name: \"2232\",\n        shape: 'rect',\n        coords: [444, 729, 479, 789],\n        preFillColor: \"green\"\n      }, {\n        name: \"2333\",\n        shape: \"rect\",\n        coords: [680, 668, 716, 884],\n        preFillColor: \"green\"\n      }]\n    };\n    const ROOM = [{\n      id: \"11\",\n      name: \"Kitchen\"\n    }, {\n      id: \"12\",\n      name: \"Ballroom\"\n    }, {\n      id: \"13\",\n      name: \"Conservatory\"\n    }, {\n      id: \"21\",\n      name: \"Diningroom\"\n    }, {\n      id: \"22\",\n      name: \"Billiardroom\"\n    }, {\n      id: \"23\",\n      name: \"Library\"\n    }, {\n      id: \"31\",\n      name: \"Lounge\"\n    }, {\n      id: \"32\",\n      name: \"Hall\"\n    }, {\n      id: \"33\",\n      name: \"Study\"\n    }, {\n      id: \"1112\",\n      name: \"1112\"\n    }, {\n      id: \"1213\",\n      name: \"1213\"\n    }, {\n      id: \"2122\",\n      name: \"2122\"\n    }, {\n      id: \"2223\",\n      name: \"2223\"\n    }, {\n      id: \"3132\",\n      name: \"3132\"\n    }, {\n      id: \"3233\",\n      name: \"3233\"\n    }, {\n      id: \"1121\",\n      name: \"1121\"\n    }, {\n      id: \"1222\",\n      name: \"1222\"\n    }, {\n      id: \"1323\",\n      name: \"1323\"\n    }, {\n      id: \"2131\",\n      name: \"2131\"\n    }, {\n      id: \"2232\",\n      name: \"2232\"\n    }, {\n      id: \"2333\",\n      name: \"2333\"\n    }];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(ImageMapper, {\n      src: URL,\n      map: MAP,\n      width: 500,\n      onLoad: () => this.load(),\n      onClick: area => this.clicked(area),\n      onMouseEnter: area => this.enterArea(area),\n      onMouseLeave: area => this.leaveArea(area),\n      onMouseMove: (area, _, evt) => this.moveOnArea(area, evt),\n      onImageClick: evt => this.clickedOutside(evt),\n      onImageMouseMove: evt => this.moveOnImage(evt),\n      imgWidth: 1230,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 5\n      }\n    }), this.state.hoveredArea && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"tooltip\",\n      style: { ...this.getTipPosition(this.state.hoveredArea)\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 6\n      }\n    }, this.state.hoveredArea && this.state.hoveredArea.name), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 5\n      }\n    }));\n  }\n\n}\n\nexport default MapExample;","map":{"version":3,"sources":["/Users/kathryncrisafulli/Desktop/clueless_git/UnitedCoders/clueless_react/src/MapExample.js"],"names":["React","ImageMapper","positional","makeMovement","makeSuggestion","makeAccusation","makeDisprove","roomCode","roomArra","roomAccess","MapExample","Component","constructor","props","state","actions","hoveredArea","msg","moveMsg","myid","started","MoveObject","PID","TO","currentLoc","document","getElementById","getAttribute","setAttribute","RenderRoom","SetUser","NUSR","RID","roomidx","fromx","fromy","tox","toy","i","cx","cy","$","css","left","top","ISFree","HWID","ValidateMove","dataId","locid","length","AreaClicked","area","alert","load","setState","clicked","shape","JSON","stringify","coords","console","log","clickedOutside","evt","x","nativeEvent","layerX","y","layerY","moveOnImage","enterArea","name","leaveArea","moveOnArea","getTipPosition","center","render","URL","MAP","areas","preFillColor","ROOM","id","_"],"mappings":"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","sourcesContent":["// import React from \"react\";\n// import \"./styles.css\";\n\n// import { ImageMap } from \"@qiuz/react-image-map\";\n// import { AreaType } from \"./AreaType\";\n\n// const onMapClick = (area: AreaType, index: number) => {\n//   const tip = `click map${area.href || index + 1}`;\n//   console.log(tip);\n//   alert(tip);\n// };\n\n// // in hooks\n// export default function Example() {\n//   const img =\n//     \"https://qiuziz.github.io/react-image-map/static/media/example.3373acbe.png\";\n\n//   const mapArea = [\n//     { left: \"0%\", top: \"6%\", height: \"12%\", width: \"33%\" },\n//     { left: \"10%\", top: \"6%\", height: \"12%\", width: \"33%\" }\n//   ];\n//   const ImageMapComponent = React.useMemo(\n//     () => (s\n//       <ImageMap\n//         className=\"usage-map\"\n//         src={img}\n//         map={mapArea}\n//         onMapClick={onMapClick}\n//       />\n//     ),\n//     [mapArea, img]\n//   );\n\n//   return <div>{ImageMapComponent}</div>;\n//   }\n\nimport React from \"react\";\nimport ImageMapper from 'react-image-mapper';\nimport { positional } from \"yargs\";\nimport { makeMovement, makeSuggestion, makeAccusation, makeDisprove } from './ClientManager';\n\n//All rooms and Hallways codes. Sequence is important - Please don't change them.\nvar roomCode = ['11','12','13','21','22','23','31','32','33','1112','1213','1121','1222','1323','2122','2223','2131','2232','2333','3132','3233']\n\n//All rooms and Hallways locations to put objects. Sequence is important - Please don't change them.\nvar roomArra = [\n    [103,241,273,426],\n    [379,300,585,455],\n    [691,235,853,394],\n    [103,541,337,716],\n    [423,544,561,715],\n    [674,510,828,660],\n    [103,835,305,1011],\n    [385,796,569,995],\n    [640,892,861,1017],\n    [304,374,304,374],\n    [625,374,625,374],\n    [219,460,219,460],\n    [543,479,543,479],\n    [735,440,735,440],\n    [365,599,365,599],\n    [591,567,591,567],\n    [284,753,284,753],\n    [444,741,444,741],\n    [680,725,680,725],\n    [335,924,335,924],\n    [590,923,590,923]\n]\n\n//All valid rooms and hallways to move in (based on player's current location). Sequence is important - Please don't change them.\nvar roomAccess = [\n    ['1112','1121','33'],\n    ['1112','1222','1213'],\n    ['1213','1323','31'],\n    ['1121','2122','2131'],\n    ['2122','1222','2223','2232'],\n    ['2223','1323','2333'],\n    ['2131','3132','13'],\n    ['3132','2232','3233'],\n    ['3233','2333','11'],\n    ['11','12'],\n    ['12','13'],\n    ['11','21'],\n    ['12','22'],\n    ['13','23'],\n    ['21','22'],\n    ['22','23'],\n    ['21','31'],\n    ['22','32'],\n    ['23','33'],\n    ['31','32'],\n    ['32','33']\n]\n  class MapExample extends React.Component {\n\n    constructor(props) {\n      super(props);\n      this.state = {\n        actions: this.props.actions,\n        hoveredArea: null,\n        msg: null, \n        moveMsg: null,\n        myid: 'P1',\n        started: true\n      };\n    }\n    state = {\n      actions: []\n    };\n\n    //Process the Move for Person or Weapon to new location\n    MoveObject(PID,TO){\n        var currentLoc=document.getElementById(PID).getAttribute('data-locId');\n        document.getElementById(PID).setAttribute('data-locId',TO);\n        this.RenderRoom(currentLoc);\n        this.RenderRoom(TO);\n    }\n\n    //Sets current user Character\n    SetUser(NUSR){\n        this.state.myid=NUSR;\n    }\n\n    //Organizes Objects in a room/hallway  (Updates Room on Gui)\n    RenderRoom(RID){\n        var roomidx=-1;\n        for(roomidx=0;roomidx<21;roomidx++){\n            if(RID==roomCode[roomidx])\n                break;\n        }\n        //alert(roomidx+','+roomCode[roomidx]);\n        var fromx=roomArra[roomidx][0];\n        var fromy=roomArra[roomidx][1];\n        var tox=roomArra[roomidx][2];\n        var toy=roomArra[roomidx][3];\n        var i=0;\n        var cx=fromx;\n        var cy=fromy;\n        for(i=1;i<7;i++){\n            if(roomCode[roomidx]==document.getElementById('P'+i).getAttribute('data-locId')){\n                $('#P'+i).css({ left: cx+ 'px' });\n                $('#P'+i).css({ top: cy+'px' });\n                cy+=45;\n                if(cy+40>toy) {\n                    cx+=45;\n                    cy=fromy;\n                }\n            }\n        }\n        for(i=1;i<7;i++){\n            if(roomCode[roomidx]==document.getElementById('W'+i).getAttribute('data-locId')){\n                $('#W'+i).css({ left: cx+ 'px' });\n                $('#W'+i).css({ top: cy+'px' });\n                cy+=45;\n\n                if(cy+40>toy) {\n                    cx+=45;\n                    cy=fromy;\n                }\n            }\n        }\n        //var rcode=roomCode;\n    }\n\n    //Checks if Hallway is free to move in ?\n    ISFree(HWID){\n        for(var i=1;i<7;i++) {\n            if (HWID == document.getElementById('P' + i).getAttribute('data-locId')) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    //Validates the requested move.\n    // We can not move to a Hallway if already someone is there\n    // We only can move to neighbor areas and cross connected rooms\n    ValidateMove(dataId){\n        var roomidx=-1;\n\n        var locid= document.getElementById(this.state.myid).getAttribute('data-locId');\n        for(roomidx=0;roomidx<21;roomidx++){\n            if(locid==roomCode[roomidx])\n                break;\n        }\n\n        for (var i=0;i<roomAccess[roomidx].length;i++){\n            if(roomAccess[roomidx][i]==dataId){\n                if(roomAccess[roomidx][i].length==2)\n                    return true;\n                return this.ISFree(roomAccess[roomidx][i]);\n            }\n        }\n        return false;\n    }\n\n    //Manages Click event on area (Room or Hallway) . Validate the Move and Move the player to new location.\n    AreaClicked(area){\n        if(!this.state.started)\n            return ;\n        var dataId=area.getAttribute('data-Id');\n        if(!this.ValidateMove(dataId))\n        {\n            alert('Your requested move is not valid!');\n            return ;\n        }\n        this.MoveObject(this.state.myid,area.getAttribute('data-Id'));\n    }\n  \n    // Provided by example\n    load() {\n      this.setState({ msg: \"Interact with image !\" });\n    }\n    clicked(area) {\n      this.setState({\n        msg: `You clicked on ${area.shape} at coords ${JSON.stringify(\n          area.coords\n        )} !`\n      });\n      console.log(this.state.msg)\n      makeMovement(\"true\", \"hallway\");\n    }\n\n    clickedOutside(evt) {\n      const coords = { x: evt.nativeEvent.layerX, y: evt.nativeEvent.layerY };\n      this.setState({\n        msg: `You clicked on the image at coords ${JSON.stringify(coords)} !`\n      });\n    }\n\n    moveOnImage(evt) {\n      const coords = { x: evt.nativeEvent.layerX, y: evt.nativeEvent.layerY };\n      this.setState({\n        moveMsg: `You moved on the image at coords ${JSON.stringify(coords)} !`\n      });\n    }\n\n    enterArea(area) {\n      this.setState({\n        hoveredArea: area,\n        msg: `You entered ${area.shape} ${area.name} at coords ${JSON.stringify(\n          area.coords\n        )} !`\n      });\n    }\n\n    leaveArea(area) {\n      this.setState({\n        hoveredArea: null,\n        msg: `You leaved ${area.shape} ${area.name} at coords ${JSON.stringify(\n          area.coords\n        )} !`\n      });\n    }\n\n    moveOnArea(area, evt) {\n      const coords = { x: evt.nativeEvent.layerX, y: evt.nativeEvent.layerY };\n      this.setState({\n        moveMsg: `You moved on ${area.shape} ${\n          area.name\n        } at coords ${JSON.stringify(coords)} !`\n      });\n    }\n  \n    getTipPosition(area) {\n      return { top: `${area.center[1]}px`, left: `${area.center[0]}px` };\n    }\n\n  render() {\n    //console.log('MessageState:' + this.state.actions)\n    //console.log('MessageProps:' + this.props.actions)\n  \n  const URL = \"/gameboard/GBG.png\"\n  const MAP = {\n    name: \"my-map\",\n    areas: [\n      {name: \"11\", shape: \"rect\", coords: [93,213,286,439], preFillColor: \"green\" },\n      {name: \"12\", shape: \"poly\", coords: [350,278,416,277,416,243,542,245,543,279,607,279,606,468,349,468], preFillColor: \"green\"},\n      {name: \"13\", shape: 'rect', coords: [673,216,863,407], preFillColor: \"green\" },\n      {name: \"21\", shape: 'poly', coords: [92,503,253,505,254,534,349,537,348,727,93,727], preFillColor: \"green\" },\n      {name: \"22\", shape: 'rect', coords: [418,537,575,724], preFillColor: \"green\" },\n      {name: \"23\", shape: 'poly', coords: [642,538,670,538,671,506,831,506,832,538,862,539,864,632,831,636,833,664,670,666,669,633,639,632], preFillColor: \"green\" },\n      {name: \"31\", shape: 'rect', coords: [91,822,316,1020], preFillColor: \"green\" },\n      {name: \"32\", shape: 'rect', coords: [382,792,571,1001], preFillColor: \"green\" },\n      {name: \"33\", shape: 'rect', coords: [639,892,862,1017], preFillColor: \"green\" },\n      {name: \"1112\", shape: 'rect', coords: [288,373,348,403], preFillColor: \"green\" },\n      {name: \"1213\", shape: 'rect', coords: [610,371,671,404], preFillColor: \"green\" },\n      {name: \"2122\", shape: 'rect', coords: [352,597,416,629], preFillColor: \"green\" },\n      {name: \"2223\", shape: 'rect', coords: [578,563,639,598], preFillColor: \"green\" },\n      {name: \"3132\", shape: 'rect', coords: [318,921,381,953], preFillColor: \"green\" },\n      {name: \"3233\", shape: 'rect', coords: [576,920,637,953], preFillColor: \"green\" },\n      {name: \"1121\", shape: 'rect', coords: [218,440,252,501], preFillColor: \"green\" }, \n      {name: \"1222\", shape: 'rect', coords: [542,471,576,531], preFillColor: \"green\" },\n      {name: \"1323\", shape: 'rect', coords: [734,409,771,503], preFillColor: \"green\" },\n      {name: \"2131\", shape: 'rect', coords: [282,730,318,819], preFillColor: \"green\" },\n      {name: \"2232\", shape: 'rect', coords: [444,729,479,789], preFillColor: \"green\" },\n      {name: \"2333\", shape: \"rect\", coords: [680,668,716,884], preFillColor: \"green\" },\n    ]\n  }\n\n  const ROOM = [\n    { id: \"11\", name: \"Kitchen\"},\n    { id: \"12\", name: \"Ballroom\"},\n    { id: \"13\", name: \"Conservatory\"},\n    { id: \"21\", name: \"Diningroom\"},\n    { id: \"22\", name: \"Billiardroom\"},\n    { id: \"23\", name: \"Library\"},\n    { id: \"31\", name: \"Lounge\"},\n    { id: \"32\", name: \"Hall\"},\n    { id: \"33\", name: \"Study\"},\n    { id: \"1112\", name: \"1112\"},\n    { id: \"1213\", name: \"1213\"},\n    { id: \"2122\", name: \"2122\"},\n    { id: \"2223\", name: \"2223\"},\n    { id: \"3132\", name: \"3132\"},\n    { id: \"3233\", name: \"3233\"},\n    { id: \"1121\", name: \"1121\"},\n    { id: \"1222\", name: \"1222\"},\n    { id: \"1323\", name: \"1323\"},\n    { id: \"2131\", name: \"2131\"},\n    { id: \"2232\", name: \"2232\"},\n    { id: \"2333\", name: \"2333\"}\n  ]\n\n    return (\n  <div className=\"container\">\n    <ImageMapper src={URL} map={MAP} width={500}\n    \tonLoad={() => this.load()}\n    \tonClick={area => this.clicked(area)}\n    \tonMouseEnter={area => this.enterArea(area)}\n    \tonMouseLeave={area => this.leaveArea(area)}\n    \tonMouseMove={(area, _, evt) => this.moveOnArea(area, evt)}\n    \tonImageClick={evt => this.clickedOutside(evt)}\n      onImageMouseMove={evt => this.moveOnImage(evt)}\n      imgWidth={1230}\n    />\n    {\n    \tthis.state.hoveredArea &&\n    \t<span className=\"tooltip\"\n    \t    style={{ ...this.getTipPosition(this.state.hoveredArea)}}>\n    \t\t{ this.state.hoveredArea && this.state.hoveredArea.name }\n    \t</span>\n    }\n    <p></p>\n</div>\n    );\n  }\n  }\n  \nexport default MapExample;"]},"metadata":{},"sourceType":"module"}